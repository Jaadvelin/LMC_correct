{"version":3,"sources":["app/initialize.js"],"names":["state","halted","play","in","out","i_cnt","intrrpt","intrp_dest","buff_cnt","acc","buff_acc","mem","Array","empty_state","set_cell","indx","val","console","log","reset_counter","step","exc","m","redraw","document","addEventListener","fill","mount","body","Layout","oninit","map","value","index","view","setInterval","class","labeled_val","labeled_input","isNaN","parseInt","onclick","mem_cell","label","callback","oninput","withAttr","input_val","placeholder","int","cmd","ins","charAt","substring","rpt","inp","urp","hlt","add","sub","sto","lod","bra","brz","brp","inc","mem_dir","sta"],"mappings":"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","file":"public/app.js","sourcesContent":["var state = {\r\n  halted : false,\r\n  play : false,\r\n  in : \"015\",\r\n  out : \"\",\r\n  i_cnt : 0,\r\n  intrrpt : 4,\r\n  intrp_dest : 6,\r\n  buff_cnt : 0,\r\n  acc : 0,\r\n  buff_acc : 0,\r\n  mem : new Array(100)\r\n}\r\n\r\nvar empty_state = ()=>{\r\n  return {\r\n    halted : false,\r\n    play : false,\r\n    in : \"\",\r\n    out : \"\",\r\n    i_cnt : 0,\r\n    intrrpt : -1,\r\n    intrp_dest : 0,\r\n    buff_cnt : 0,\r\n    acc : 0,\r\n    buff_acc : 0,\r\n    mem : new Array(100)\r\n  }\r\n}\r\n\r\nvar set_cell = ( indx, val )=>{\r\n  console.log(\"setting addr: \", indx, \" to: \", val)\r\n  state.mem[ indx ] = val\r\n}\r\n\r\nvar reset_counter = ()=>{\r\n  state.i_cnt = 0\r\n}\r\n\r\nvar step = ()=>{\r\n  exc( state.i_cnt )\r\n  m.redraw()\r\n}\r\n\r\ndocument.addEventListener('DOMContentLoaded', function() {\r\n  state.mem.fill(\"000\", 0, 100)\r\n\r\n  m.mount(document.body, Layout)\r\n});\r\n\r\nvar Layout = {\r\n  oninit : ()=>{\r\n    [ \"505\", \"105\", \"305\" ,\"901\", \"205\", \"010\", \"901\", \"105\", \"305\", \"902\"\r\n    ].map(( value, index )=>{\r\n      return state.mem[ index ] = value\r\n    })\r\n  },\r\n  view : ()=>{\r\n    console.log(state)\r\n    setInterval(()=>{ \r\n      if( state.play ){ step()  }\r\n    }, 3000 )\r\n\r\n    return m(\"\",{ class : \"flex flex-row justify-around\" }, [\r\n      m(\"\",{ class : \"flex flex-col items-end\"} ,[\r\n        labeled_val( \"COUNTER\", state.i_cnt ),\r\n        labeled_val( \"ACC\", state.acc ),\r\n        labeled_input( \"INPUT\", state.in, ( value )=>{ state.in = value  } ),\r\n        labeled_input( \"OUTPUT\", state.out, ( value )=>{ state.out = value  } ),\r\n        labeled_input( \"INTR ADR\", state.intrrpt, ( value )=>{ state.intrrpt = isNaN( value ) ? 0 : parseInt( value )  } ),\r\n        labeled_input( \"INTR DES\", state.intrp_dest, ( value )=>{ state.intrp_dest = isNaN( value ) ? 0 : parseInt( value )  } ),\r\n        m(\"\",[\r\n          m(\"\", { class : \"mt-2 mb-4\" }, [\r\n\r\n            m(\"button\", { \r\n              class : \"bg-grey-light hover:bg-grey mr-2 px-2 py-4\",\r\n              onclick : ()=>{ state = empty_state() ; state.mem.fill(\"000\", 0, 100) }\r\n            }, \"CLEAR ALL\"),\r\n            \r\n            m(\"button\", { \r\n              class : \"bg-grey-light hover:bg-grey mr-2 px-2 py-4\",\r\n              onclick : ()=>{ reset_counter() }\r\n            }, \"RESET CTR\"),\r\n          ]),\r\n          m(\"button\", { \r\n            class : \"bg-grey-light hover:bg-grey mr-2 px-2 py-4\" + ` ${ state.play ? \"border-solid border-red-light border-2\" : \"\" }`,\r\n            onclick : ()=>{ state.play = true }\r\n          }, \"RUN\"),\r\n          m(\"button\", { \r\n            class : \"bg-grey-light hover:bg-grey px-2 py-4\" + ` ${ !state.play ? \"border-solid border-red-light border-2\" : \"\" }`,\r\n            onclick : ()=>{ state.play = false }\r\n          }, \"STEP\"),\r\n          !state.play ? m(\"button\", { \r\n            class : \"bg-grey-light hover:bg-grey px-2 py-4\",\r\n            onclick : ()=>{ step() }\r\n          }, \"EXEC\") : \"\"\r\n        ])\r\n      ]),\r\n      m(\"\", { class : \"flex max-w-xl flex-row flex-wrap border-grey-dark border-l-2 pl-4\" },\r\n        state.mem.map( mem_cell )\r\n      )\r\n \r\n    ])    \r\n  }\r\n}\r\n\r\nvar labeled_val = ( label, value )=>{\r\n  return m(\"\", { class : \"flex flex-row w-48 content-center py-2 px-2 border-grey-dark border-2 mb-2\"}, [\r\n    m(\"label\", {class : \"w-24\"}, label),\r\n    m(\"label\", {class : \"ml-2 text-blue border-grey border-l-2 px-2\"}, value),\r\n  ])\r\n}\r\n\r\nvar labeled_input = ( label, value, callback )=>{\r\n  return m(\"\", { class : \"flex flex-row w-48 content-center py-2 px-2 border-grey-dark border-2 mb-2\"}, [\r\n    m(\"label\", {class : \"w-24\"}, label),\r\n    m(\"input\", {\r\n      class : \"ml-2 w-16 text-blue border-grey border-l-2 px-2\",\r\n      value : value,\r\n      oninput : m.withAttr(\"value\", callback )\r\n    }),\r\n  ])\r\n}\r\n\r\n\r\nvar mem_cell = ( val, indx )=>{\r\n  return m(\"\", { class : \"px-1 py-2\" + `${( indx === state.i_cnt ? \" bg-blue-lightest\" : \"\" )}` },\r\n    [ m(\"label\", {}, ` ${ indx > 9 ? indx : \"0\" + indx } - ` ), \r\n      m(\"input\", { class : \"border-solid border-grey-dark border-2 w-12 p-2\", \r\n      oninput : m.withAttr( \"value\", (input_val)=>{\r\n        set_cell( indx, input_val )\r\n      }),\r\n      placeholder : \"-\" , \r\n      value : val } )\r\n    ])\r\n}\r\n\r\nvar exc = ( int )=>{\r\n  \r\n  let cmd = state.mem[int]\r\n  let ins = cmd.charAt( 0 )\r\n  let val = parseInt( cmd.substring(1, 3) )\r\n  \r\n  console.log( \"CNT\" , state.i_cnt, \"ACC\", state.acc, \"BFFCNT\", state.buff_cnt , \"BFFACC\" , state.buff_acc ,  \"CMD\", cmd, \"INSTRUCTION: \", ins, \"VALUE:\", val)\r\n  \r\n  if( state.halted ){ return }\r\n  if( state.i_cnt === state.intrrpt ){ return rpt() }\r\n  if( cmd === \"901\" ){ inp() }\r\n  if( cmd === \"902\" ){ out() }\r\n  if( cmd === \"903\" ){ console.log(\"UNINTERRUPT\") ; urp() }\r\n  \r\n  switch( ins ){\r\n    case \"0\" : hlt( ) ; break\r\n    case \"1\" : add( val ) ; break\r\n    case \"2\" : sub( val ) ; break\r\n    case \"3\" : sto( val ) ; break\r\n    case \"4\" :  ; break\r\n    case \"5\" : lod( val ) ; break\r\n    case \"6\" : bra( val ) ; break\r\n    case \"7\" : brz( val ) ; break\r\n    case \"8\" : brp( val ) ; break\r\n  }\r\n}\r\n\r\nvar inc = () =>{ state.i_cnt = state.i_cnt + 1 }\r\n\r\nvar add = ( mem_dir )=>{ state.acc = parseInt(state.acc) + parseInt(state.mem[ mem_dir ]) ; inc() }\r\n\r\nvar sub = ( mem_dir )=>{ state.acc = parseInt(state.acc) - parseInt(state.mem[ mem_dir ]) ; inc() }\r\n\r\nvar sta = ( mem_dir )=>{ state.mem[ mem_dir ] = state.acc < 100 ? \"0\"+ state.acc : state.acc ; inc() }\r\n\r\nvar sto = ( mem_dir )=>{ state.mem[ mem_dir ] = state.acc < 100 ? \"0\"+ state.acc : state.acc ; inc() }\r\n\r\nvar lod = ( mem_dir )=>{ state.acc = parseInt( state.mem[ mem_dir ]) ; inc() }\r\n\r\nvar brz = ( mem_dir )=>{ if( state.acc === 0 ){ state.i_cnt = mem_dir } }\r\n\r\nvar brp = ( mem_dir )=>{ if( state.acc >= 0 ){ state.i_cnt = mem_dir } }\r\n\r\nvar bra = ( mem_dir )=>{ state.i_cnt = mem_dir }\r\n\r\nvar inp = ()=>{ state.acc = state.in ; inc() }\r\n\r\nvar out = ()=>{ state.out = state.acc ; inc() }\r\n\r\nvar hlt = ()=>{ state.halted = true }\r\n\r\nvar rpt = ()=>{ state.buff_acc = state.acc ; state.buff_cnt = state.i_cnt ; state.i_cnt = state.intrp_dest ; state.intrrpt = -1 }\r\n\r\nvar urp = ()=>{ state.acc = state.buff_acc ; state.i_cnt = state.buff_cnt }"]}